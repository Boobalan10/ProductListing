"use strict";(self.webpackChunkclo_assessment=self.webpackChunkclo_assessment||[]).push([[931],{3931:(e,s,c)=>{c.r(s),c.d(s,{default:()=>N});var l=c(5043),t=c(9556);const i="FilterForm_filterBox__ydm8X",r="FilterForm_searchSec__Rq3DQ",a="FilterForm_slideValue__6Atwx";var n=c(1123),o=c(3003),d=c(8678),m=c(579);const h=function(){const[e,s]=(0,l.useState)([0,999]),c=(0,o.d4)(e=>e.filters),h=(0,o.wA)();return(0,m.jsxs)("form",{children:[(0,m.jsx)("div",{className:"".concat(r," mb-4"),children:(0,m.jsxs)("div",{className:"search-box col-12 col-sm-10 col-lg-8 mx-auto px-0",children:[(0,m.jsx)("input",{type:"text",className:"border-0 w-100",placeholder:"search",name:"search",value:c.searchText,onChange:e=>h((0,d.Uz)(e.target.value))}),(0,m.jsx)("img",{src:t.s.SearchIcon,alt:"search-icon"})]})}),(0,m.jsxs)("div",{className:"".concat(i," row justify-content-between mx-0 py-2"),children:[(0,m.jsx)("div",{className:"col-12 col-md-10 col-xl-11",children:(0,m.jsxs)("div",{className:"row align-items-center mx-0",children:[(0,m.jsxs)("div",{className:"checkbox-sec col-12 col-md-6 col-xl-4 px-0 mb-2",children:[(0,m.jsx)("label",{className:"mr-3",children:" Pricing Option"}),["Paid","Free","View Only"].map(e=>(0,m.jsxs)("div",{className:"form-check form-check-inline",children:[(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",value:e,checked:c.selectedCategories.includes(e),onChange:()=>h((0,d.rd)(e))}),(0,m.jsx)("label",{className:"form-check-label",children:e})]},e))]}),(0,m.jsxs)("div",{className:"range-slide-sec col-12 col-md-6 col-xl-4 px-0 mb-2",children:[(0,m.jsx)("label",{className:"mr-3",children:"Price Filter"}),(0,m.jsxs)("div",{className:"".concat(a," d-flex mt-2 align-items-center"),children:[(0,m.jsx)("input",{type:"number",value:e[0],readOnly:!0}),(0,m.jsx)(n.A,{value:e,min:0,max:999,disabled:!c.selectedCategories.includes("Paid"),onInput:e=>{s(e),h((0,d.xA)(e))}}),(0,m.jsx)("input",{type:"number",value:e[1],readOnly:!0})]})]})]})}),(0,m.jsxs)("button",{className:"bg-transparent border-0 col-12 col-md-2 col-xl-1",onClick:function(e){e.preventDefault(),h((0,d.yn)())},children:[(0,m.jsx)("img",{src:t.s.ResetIcon,alt:"resetIcon"}),"Reset"]})]}),(0,m.jsxs)("div",{className:"sort-sec mt-4 text-right",children:[(0,m.jsx)("span",{children:"SortBy"}),(0,m.jsxs)("select",{value:c.sortBy,onChange:e=>h((0,d.ku)(e.target.value)),children:[(0,m.jsx)("option",{value:"none",children:"Sort"}),(0,m.jsx)("option",{value:"lowToHigh",children:"Low to High"}),(0,m.jsx)("option",{value:"highToLow",children:"High to Low"})]})]})]})};const x=function(e){let{productData:s}=e;return(0,m.jsxs)("div",{className:"card-sec d-flex flex-column h-100",children:[(0,m.jsx)("div",{className:"product-img-sec h-100",children:(0,m.jsx)("img",{src:s.imagePath,alt:"productImage"})}),(0,m.jsxs)("div",{className:"product-content row justify-content-between mx-0 mt-2",children:[(0,m.jsxs)("div",{className:"product-details",children:[(0,m.jsx)("p",{className:"mb-1",children:s.creator}),(0,m.jsx)("h5",{className:"mb-0",children:s.title})]}),(0,m.jsx)("div",{className:"price",children:(0,m.jsx)("h5",{children:0===s.pricingOption?"$".concat(s.price):1===s.pricingOption?"FREE":2===s.pricingOption?"View Only":""})})]})]})};var u=c(1283),p=c(33),g=c(2099);const j={Paid:0,Free:1,"View Only":2},v=(0,g.Mz)([e=>e.products,e=>e.filters],(e,s)=>{let c=[...e];if(s.searchText&&(c=c.filter(e=>e.title.toLowerCase().includes(s.searchText.toLowerCase()))),s.selectedCategories.length>0){const e=s.selectedCategories.map(e=>j[e]);c=c.filter(s=>e.includes(s.pricingOption))}const[l,t]=s.priceRange;return c=c.filter(e=>e.price>=l&&e.price<=t),"lowToHigh"===s.sortBy?c.sort((e,s)=>e.price-s.price):"highToLow"===s.sortBy&&c.sort((e,s)=>s.price-e.price),c});var f=c(5843);const N=function(){const e=(0,o.wA)(),s=(0,o.d4)(e=>e.filters),[c,i]=(0,u.ok)(),r=(0,o.d4)(v),[a,n]=(0,l.useState)(0),{ref:g,inView:j}=(0,f.Wx)();(0,l.useEffect)(()=>{var s,l;const t={searchText:c.get("search")||"",selectedCategories:(null===(s=c.get("categories"))||void 0===s?void 0:s.split(","))||[],priceRange:(null===(l=c.get("price"))||void 0===l?void 0:l.split("-").map(Number))||[0,999],sortBy:c.get("sort")||"none"};e((0,d.LS)(t))},[c,e]);const N=(0,l.useCallback)(e=>{var s;const c={};return e.searchText&&(c.search=e.searchText),null!==(s=e.selectedCategories)&&void 0!==s&&s.length&&(c.categories=e.selectedCategories.join(",")),!e.priceRange||0===e.priceRange[0]&&999===e.priceRange[1]||(c.price=e.priceRange.join("-")),"none"!==e.sortBy&&(c.sort=e.sortBy),c},[]),b=(0,l.useMemo)(()=>N(s),[s,N]);(0,l.useEffect)(()=>{i(b)},[b,i]),(0,l.useEffect)(()=>{e((0,p.j)())},[e]);const w=(0,l.useMemo)(()=>r.slice(0,10*a),[r,a]),y=w.length<r.length;return(0,l.useEffect)(()=>{j&&y&&n(e=>e+1)},[j,y]),console.log("sliced",w),console.log("page",a),(0,m.jsxs)("section",{className:"product-view mt-4",children:[(0,m.jsx)("section",{className:"filter-sec mb-5 container-fluid",children:(0,m.jsx)(h,{})}),(0,m.jsx)("section",{className:"product-data py-4",children:(0,m.jsxs)("div",{className:"container-fluid",children:[(0,m.jsx)("div",{className:"row",children:null===w||void 0===w?void 0:w.map(e=>(0,m.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-xl-3 mb-5",children:(0,m.jsx)(x,{productData:e})},e.id))}),(0,m.jsx)("div",{ref:g,className:"text-center",children:10*a<r.length?(0,m.jsx)("img",{src:t.s.LoadingIcon,alt:"loadingIcon"}):""})]})})]})}}}]);
//# sourceMappingURL=931.9a92343f.chunk.js.map